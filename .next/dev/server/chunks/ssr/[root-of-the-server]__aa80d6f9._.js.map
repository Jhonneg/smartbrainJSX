{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///home/jonee/Work/smartbrainJSX/app/page.jsx"],"sourcesContent":["import { useState } from \"react\";\nimport Logo from \"../src/components/Logo/Logo\";\nimport ImageLinkForm from \"../src/components/ImageLinkForm/ImageLinkForm\";\nimport FaceRecongnition from \"../src/components/FaceRecongnition/FaceRecongnition\";\n\nconst MODEL_ID = \"face-detection\";\n\nconst setupClarifai = (imageUrl) => {\n  const PAT = process.env.NEXT_PUBLIC_CLARIFAI_KEY;\n  const USER_ID = \"joneewars\";\n  const APP_ID = \"Face-detect\";\n  const IMAGE_URL = imageUrl;\n\n  const raw = JSON.stringify({\n    user_app_id: {\n      user_id: USER_ID,\n      app_id: APP_ID,\n    },\n    inputs: [\n      {\n        data: {\n          image: {\n            url: IMAGE_URL,\n          },\n        },\n      },\n    ],\n  });\n  return {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      Authorization: \"Key \" + PAT,\n    },\n    body: raw,\n  };\n};\n\nconst initialUserState = {\n  id: \"\",\n  name: \"\",\n  email: \"\",\n  entries: \"0\",\n  joined: \"\",\n  pet: \"\",\n  age: \"\",\n};\n\nconst calculateFaceLocations = (data) => {\n  if (!data || !data.outputs) return [];\n\n  return data.outputs[0].data.regions.map((face) => {\n    const clarifaiFace = face.region_info.bounding_box;\n    const image = document.querySelector(\".inputimage\");\n\n    if (!image) return {};\n\n    const width = Number(image.width);\n    const height = Number(image.height);\n\n    return {\n      leftCol: clarifaiFace.left_col * width,\n      topRow: clarifaiFace.top_row * height,\n      rightCol: width - clarifaiFace.right_col * width,\n      bottomRow: height - clarifaiFace.bottom_row * height,\n    };\n  });\n};\n\nexport default function Home() {\n  const [input, setInput] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [boxes, setBoxes] = useState([]);\n  const [user, setUser] = useState(initialUserState);\n\n  const resetState = () => {\n    setInput(\"\");\n    setImageUrl(\"\");\n    setBoxes([]);\n    setUser(initialUserState);\n  };\n\n  const displayFaceBox = (newBoxes) => {\n    setBoxes(newBoxes);\n  };\n\n  const onInputChange = (event) => {\n    setInput(event.target.value);\n  };\n\n  const onSubmit = () => {\n    setImageUrl(input);\n\n    fetch(\n      `https://api.clarifai.com/v2/models/${MODEL_ID}/outputs`,\n      setupClarifai(input)\n    )\n      .then((response) => response.json())\n      .then((response) => {\n        if (response) displayFaceBox(calculateFaceLocations(response));\n      })\n      .catch((error) => console.log(\"Clarifai API error\", error));\n  };\n\n  return (\n    <div className=\"App\">\n      <div>\n        <Logo />\n        <ImageLinkForm onInputChange={onInputChange} onSubmit={onSubmit} />\n        <FaceRecongnition boxes={boxes} imageUrl={imageUrl} />\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;;;;;;;;;;;;;;;;;;;;;AAKA,MAAM,WAAW;AAEjB,MAAM,gBAAgB,CAAC;IACrB,MAAM,MAAM,QAAQ,GAAG,CAAC,wBAAwB;IAChD,MAAM,UAAU;IAChB,MAAM,SAAS;IACf,MAAM,YAAY;IAElB,MAAM,MAAM,KAAK,SAAS,CAAC;QACzB,aAAa;YACX,SAAS;YACT,QAAQ;QACV;QACA,QAAQ;YACN;gBACE,MAAM;oBACJ,OAAO;wBACL,KAAK;oBACP;gBACF;YACF;SACD;IACH;IACA,OAAO;QACL,QAAQ;QACR,SAAS;YACP,QAAQ;YACR,eAAe,SAAS;QAC1B;QACA,MAAM;IACR;AACF;AAEA,MAAM,mBAAmB;IACvB,IAAI;IACJ,MAAM;IACN,OAAO;IACP,SAAS;IACT,QAAQ;IACR,KAAK;IACL,KAAK;AACP;AAEA,MAAM,yBAAyB,CAAC;IAC9B,IAAI,CAAC,QAAQ,CAAC,KAAK,OAAO,EAAE,OAAO,EAAE;IAErC,OAAO,KAAK,OAAO,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACvC,MAAM,eAAe,KAAK,WAAW,CAAC,YAAY;QAClD,MAAM,QAAQ,SAAS,aAAa,CAAC;QAErC,IAAI,CAAC,OAAO,OAAO,CAAC;QAEpB,MAAM,QAAQ,OAAO,MAAM,KAAK;QAChC,MAAM,SAAS,OAAO,MAAM,MAAM;QAElC,OAAO;YACL,SAAS,aAAa,QAAQ,GAAG;YACjC,QAAQ,aAAa,OAAO,GAAG;YAC/B,UAAU,QAAQ,aAAa,SAAS,GAAG;YAC3C,WAAW,SAAS,aAAa,UAAU,GAAG;QAChD;IACF;AACF;AAEe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,EAAE;IACrC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IAEjC,MAAM,aAAa;QACjB,SAAS;QACT,YAAY;QACZ,SAAS,EAAE;QACX,QAAQ;IACV;IAEA,MAAM,iBAAiB,CAAC;QACtB,SAAS;IACX;IAEA,MAAM,gBAAgB,CAAC;QACrB,SAAS,MAAM,MAAM,CAAC,KAAK;IAC7B;IAEA,MAAM,WAAW;QACf,YAAY;QAEZ,MACE,CAAC,mCAAmC,EAAE,SAAS,QAAQ,CAAC,EACxD,cAAc,QAEb,IAAI,CAAC,CAAC,WAAa,SAAS,IAAI,IAChC,IAAI,CAAC,CAAC;YACL,IAAI,UAAU,eAAe,uBAAuB;QACtD,GACC,KAAK,CAAC,CAAC,QAAU,QAAQ,GAAG,CAAC,sBAAsB;IACxD;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;;8BACC,8OAAC;;;;;8BACD,8OAAC;oBAAc,eAAe;oBAAe,UAAU;;;;;;8BACvD,8OAAC;oBAAiB,OAAO;oBAAO,UAAU;;;;;;;;;;;;;;;;;AAIlD","debugId":null}}]
}